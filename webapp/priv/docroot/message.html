<!DOCTYPE html>
<html>
  <head>
    <title id="page-title"></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/uikit.min.css" />
    <link rel="stylesheet" href="css/message.css" />
    <link rel="icon" type="image/png" href="/favicon/favicon-48x48.png" sizes="48x48" />
    <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/favicon/site.webmanifest" />
    <script src="js/uikit.min.js" defer></script>
    <script src="js/uikit-icons.min.js" defer></script>
    <script src="js/uhtml.min.js" defer></script>
    <script type="module" src="js/bespoke.js" defer></script>
    <script type="module" src="js/message.js" defer></script>
  </head>
  <body>
    <div class="uk-container uk-container-xsmall">
      <!-- Header -->
      <div class="uk-card uk-card-default uk-padding-small uk-background-muted">
        <div class="uk-flex uk-flex-between uk-flex-middle">
          <button onclick="bespoke.gotoPage(event, 'message.html', -1)" data-back-destination="message.html" class="uk-icon-button" uk-icon="arrow-left" ratio="1.5"></button>
          <div class="uk-flex-1 uk-flex uk-flex-center">
            <div>
              Message
              <span id="reply-depth" class="uk-text-meta"></span>
            </div>
          </div>
          <div>
            <button id="delete-message" onclick="message.openDeleteMessageModal(event)" class="uk-icon-button" uk-icon="trash"></button>
            <button onclick="bespoke.gotoPage(event, 'add_reply.html')" class="uk-icon-button" uk-icon="reply"></button>
          </div>
        </div>
      </div>
      <!-- Parent message -->
      <div onclick="message.gotoRootMessage()" class="uk-text-bold uk-margin-top" id="message-title"></div>
      <div id="message-body" class="uk-container uk-margin-top"></div>
      <div class="uk-text-meta uk-margin-small">
        <span id="message-author"></span> •
        <span id="message-created"></span> •
        <span uk-icon="comment"></span>
        <span id="message-reply-count"></span>
      </div>
      <!-- Replies -->
      <div id="replies"></div>
    </div>
    <!-- Modal dialog to delete a message -->
    <div id="delete-message-modal" uk-modal>
      <div class="uk-modal-dialog uk-modal-body">
        <h2 class="uk-modal-title">Delete message</h2>
        <p>Do you really want to delete "<span class="uk-text-bold" id="delete-message-title"></span>"?</p>
        <p class="uk-text-right">
          <button class="uk-button uk-button-default uk-modal-close" type="button">No</button>
          <button class="uk-button uk-button-danger" onclick="message.deleteMessage(event)">Yes</button>
      </div>
    </div>
    <script type="module">
      import bespoke from "/js/bespoke.js";
      import message from "/js/message.js";
      window.bespoke = bespoke;
      window.message = message;
    </script>
  </body>
</html>
